<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" ?>
<casaxml xmlns="http://casa.nrao.edu/schema/psetTypes.html"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://casa.nrao.edu/schema/casa.xsd
      file:///opt/casa/code/xmlcasa/xml/casa.xsd">

<task type="function" name="flagmanager" category="editing">
        <shortdescription>Enable list, save, restore, delete and rename flag version files.</shortdescription>
<description>
The flag version files are copies of the flag column for a measurement
set. They can be restored to the data set to get back to a previous
flag version. On running importvla, a flag version call 'Original' is
automatically produced. It is recommended to save a flagversion at the
beginning or after serious editing.
</description>
        <input>
                <param type="string" name="vis" mustexist="true">
<shortdescription>Name of input visibility file</shortdescription>
<description>Name of input visibility file
                     Default: none

                        Example: vis='ngc5921.ms'
</description>
                        <value></value>
                        <example>vis='ngc5921.ms'</example>
                </param>

                <param type="string" name="mode">
<shortdescription>Operation: list, save, restore, delete, rename</shortdescription>
<description>Flag version operation
                     Default: 'list'
                     Options: list, save, restore, delete, rename

                     * 'list': it will list in the logger the existing
		       flag versions of the MS. This option will also
		       return by default a dictionary containing the
		       name of the MS, the name of the flag version
		       and the comment. This information is taken from
		       the FLAG_VERSION_LIST file inside the
		       .flagversions directory.
                     * 'save': will save the FLAG column from vis to a
		       specified flag file. If the name given in
		       versionname already exists, the task will give
		       a warning and rename it to a name with a suffix
		       '.old.timestamp'. The respective entry in
		       FLAG_VERSION_LIST will also be updated.
                     * 'restore': will place the specified flag file
		       into vis
                     * 'delete': will delete specified flag file
                     * 'rename': will rename a specified flag file
</description>
                        <value>list</value>
                        <allowed kind="enum">
                                <value>list</value>
                                <value>save</value>
                                <value>restore</value>
                                <value>delete</value>
                                <value>rename</value>
                        </allowed>
                </param>

<param type="string" name="versionname" subparam="true">
<shortdescription>Flag version name</shortdescription>
<description>Flag version name
                     Default: none
                     Subparameter of mode='save|restore|delete|rename'

                        Example: versionname='original_data'

                     No imbedded blanks in the versionname
</description>
                        <value></value>
</param>

<param type="string" name="oldname" subparam="true">
<shortdescription>Flag version to rename</shortdescription>
<description>Flag version to rename
                     Default: none
                     Subparameter of mode='rename'
</description>
                        <value></value>
</param>
 
<param type="string" name="comment" subparam="true">
<shortdescription>Short description of a versionname</shortdescription>
<description>Short description of a versionname
                     Default: none
                     Subparameter of mode='save|rename'

                        Example: comment='Clip above 1.85'
                        comment = versionname
</description>
                        <value></value>
                </param>

<param type="string" name="merge" subparam="true">
<shortdescription>Merge option: replace will save or over-write the flags</shortdescription>             
<description>Merge operation
                     Subparameter of mode='save|restore'
                     Options: 'or','and', but not recommended for now.
</description>
                        <value>replace</value>
</param>
                <constraints>
                        <when param="mode">
                                <equals value="list"/>
                                <equals value="save">
                                        <default param="versionname"><value type="string"></value></default>
                                        <default param="comment"><value type="string"></value></default>
                                        <default param="merge"><value type="string">replace</value></default>
                                </equals>
                                <equals value="restore">
                                        <default param="versionname"><value type="string"></value></default>
                                        <default param="merge"><value type="string">replace</value></default>
                                </equals>
                                <equals value="delete">
                                        <default param="versionname"><value type="string"></value></default>
                                </equals>
                                <equals value="rename">
                                        <default param="oldname"><value type="string"></value></default>
                                        <default param="versionname"><value type="string"></value></default>
                                        <default param="comment"><value type="string"></value></default>
                                </equals>
                        </when>
                </constraints>
        </input>
<returns type="void"/>

<example>
For more information, see the task pages of flagmanager in CASA Docs:

https://casa.nrao.edu/casadocs/
 </example>
 </task>
 </casaxml>

