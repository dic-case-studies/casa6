<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta>
<link REL="icon" HREF="../html/images/favicon.ico"></link>
<style type="text/css">
@import url("../html/style/tigris.css");
@import url("../html/style/maven.css");
@import url("../html/style/project.css");

A.leftmenu:link{color:#ffffff; text-decoration: none; font-weight: bold; font-size: 14px; }
A.leftmenu:visited{color:#ffffff; text-decoration: none; font-weight: bold; font-size: 14px; }
A.leftmenu:hover{color:#ffffff; text-decoration: underline; font-weight: bold; font-size: 14px; }

A.leftmenu2:link{color:#ffcccc; text-decoration: none; font-weight: bold; font-size: 14px; }
A.leftmenu2:visited{color:#ffcccc; text-decoration: none; font-weight: bold; font-size: 14px; }
A.leftmenu2:hover{color:#ffcccc; text-decoration: underline; font-weight: bold; font-size: 14px; }
A.navig:link{color:#0000cc; text-decoration: none; font-weight: normal; font-size: 14px; }
A.navig:visited{color:#0000cc; text-decoration: none; font-weight: normal; font-size: 14px; }
A.navig:hover{color:#ff0000; text-decoration: underline; font-weight: normal; font-size: 14px; }

/* CSS for collapsed menus */
.tplus {
         color:#ccffcc;
         background: url(/gold/bclosed.gif) no-repeat 0 0;
         text-decoration: none;
         font-weight: bold;
         font-size: 14px; }
.tminus {
         color:#ccffcc;
         background: url(/gold/bopen.gif) no-repeat 0 0;
         text-decoration: none;
         font-weight: bold;
         font-size: 14px; }
.collapsed {
         height: 1px;
         margin-top: -1px;
         overflow: hidden;
         visibility: hidden; }
.open {
         margin-top: 12px;
         margin-left: 8px; }
/* End collapsing CSS */

body{font-family: Helvetica; font-size:14px;}
td{font-family: Helvetica; color: #000000; font-size: 14px;}
div.outlined { border: solid; border-width: thin; padding: 1.0em;
               background: #ffff99; color: #000066; font-weight: bold;
               text-align: left; } 
</style>

<script language="Javascript" type="text/javascript">
 var dayNames = new Array ();
 dayNames[0]="Sunday";
 dayNames[1]="Monday";
 dayNames[2]="Tuesday";
 dayNames[3]="Wednesday";
 dayNames[4]="Thursday";
 dayNames[5]="Friday";
 dayNames[6]="Saturday";

 var monthNames = new Array ();
 monthNames[0]="January";
 monthNames[1]="February";
 monthNames[2]="March";
 monthNames[3]="April";
 monthNames[4]="May";
 monthNames[5]="June";
 monthNames[6]="July";
 monthNames[7]="August";
 monthNames[8]="September";
 monthNames[9]="October";
 monthNames[10]="November";
 monthNames[11]="December";

 var now = new Date();
 var day = now.getDay();
 var month = now.getMonth();
 var year = now.getFullYear();
 var date = now.getDate();

function MCollapse( number ) {
   var mID = 'lmenu' + number;
   var mDIV = document.getElementById( mID );
      mDIV.className = (mDIV.className == 'collapsed') ? 'open' : 'collapsed';
      mID = 'trig' + number;
   var tDIV = document.getElementById( mID );
      tDIV.className = (tDIV.className == 'tplus') ? 'tminus' : 'tplus';
}
</script>

<!-- end of nrao-header.html -->
<title>XMLCASA Element Tag Documentation</title>
</head>
<body class="composite" bgcolor="#ffffff" marginheight="0" marginwidth="0" topmargin="0" leftmargin="0">
<table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#000000">
  <tr>
    <td width="100%" height="50" align="left" bgcolor="#003366">
      <a href="http://www.nrao.edu/">
      <img src="../gif/nraotop2.gif" alt="nrao" border="0"><img src="../gif/nraotop.gif" alt="nrao" border="0">
      </a>
    </td>
  </tr>
  <tr>
       <td align="right"> 
          <font color="#ffffff" face="Helvetica" size="-1">
          <script language="Javascript" type="text/javascript">
            document.write(dayNames[day] + ", " + monthNames[month] + " ");
            document.write(date + ", " + year );
	  </script>
          </font>
          </td>
  </tr>
  <tr>
  <td width="100%" height="25" align="left" bgcolor="#cccccc" valign="middle">
<!-- NAVIGATION ITEMS GO HERE -->
<!-- End of nrao-nav1.html -->
&nbsp;<a class="navig" href="http://www.nrao.edu/">NRAO Home</a> &gt;
CASA &gt; Programming &gt; XML Element Tags
<!-- Start of nrao-nav2menu1.html -->
<!-- NAVIGATION ITEMS GO HERE -->
  </td>
  </tr>
</table>

<!--Tags, Attributes (required), Description

tool
   code
      include
      private
   shortdescription
   description
   method
      shortdescription
      description
      output
      inout
      input
         param
	   any
	   defaultrecord
	   description
	   value
      returns
      example
      task -->
<div id="bodycol">
<h2>CASA XML</h2>
<h3>Introduction</h3>
<P>
The XML files found in code/xmlcasa/implement/* describe the interfaces to the tool and tasks found in CASA.
These XML files use a small number of element tags to describe the interfaces. By using the following elements
with their attributes we can fairly well describe the interface as well as specifying system wide defaults and
in the near future enumerated types for input arguments.
</P>
<P>
While there are some code excerpts to illustrate how an element is constructed, the best (and hopefully
working) examples will be found in the xml files themselves located in code/xmlcasa/implement/*/*.xml.
</P>
<div class="app">

      <div class="h3">
      <h3>XMLCASA Element Tags</h3>
<table border="1" width="100%" cellspacing="2" cellpadding="3">
<colgroup>
	<col width="10%"></col>
	<col width="90%"></col>
</colgroup>
<tr><th>Tag Name</th><th>Description</th></tr>
<tr class="a"><td><a href="#tool">tool</a></td><td>
A tool typically has the following elements, short description, description, one or more methods and an example.
</td></tr>
<tr class="b"><td><a href="#task">task</a></td><td>
		A task is very similar to a tool method. The main difference being it will be a complex 
		set of calls to one or more tool methods. As such it may contain output, inout, and input
		elements.
		It should always have a shortdescription, description, and returns elements.
</td></tr>
<tr class="a"><td><a href="#code">code</a></td><td>
		Helper code for the C++ code generaterator.  It will contain the private and or include
		elements.
		Currently no attributes.
</td></tr>
<tr class="b"><td><a href="#include">include</a></td><td>
		Additional include statements, handy for forward declarations. During development this should
		just be a single file to avoid having to rerun the code generator each time a change is made.
		Currently no attributes.
</td></tr>
<tr class="a"><td><a href="#private">private</a></td><td>
		What to additionally include in the private part of a class. Also during development this
		should just be a single include file to avoid having to rerun the code generator when making
		changes.
		Currently no attributes.
</td></tr>
<tr class="b"><td><a href="#shortdescription">shortdescription</a></td><td>
		A short terse description, typically one or two lines. This will typically appear in the
		scripting languages help text.
		Currently no attributes.
</td></tr>
<tr class="a"><td><a href="#description">description</a></td><td>
		A more detail description of what the tool, task, method, parameter is. The use of latex 
		in this block is supported for generating html and pdf documentation.
		Currently no attributes.
</td></tr>
<tr class="b"><td><a href="#method">method</a></td><td>
		A method or function of an object belonging to a tool.  A method will typically contain a
		shortdescription, description, returns, and example elements.  It may also have output, inout,
		and input elements.
</td></tr>
<tr class="a"><td><a href="#output">output</a></td><td>
		An output element consists of one or more param elements that will be returned by the method
		or task. 
		Currently no attributes.
</td></tr>
<tr class="b"><td><a href="#inout">inout</a></td><td>
		An inout element consists of one or more param elements that will be used as input for a 
		method or task and possibly modified and returned as output.
		Currently no attributes.
</td></tr>
<tr class="a"><td><a href="#input">input</a></td><td>
		An input element consists of one or more param elements that will be used as input by a
		method or task. Other tools maybe used as input if properly registered with the system.
		Currently no attributes.
</td></tr>
<tr class="b"><td><a href="#param">param</a></td><td>
		A param element describes an argument to a task or tool method. Typically it will have
		a description element and if it has a default value on or more value elements.
</td></tr>
<tr class="a"><td><a href="#any">any</a></td><td>
<P>		An any type, for unknown or records, i.e. string or int.
</td></tr>
<tr class="b"><td><a href="#comments">comments</a></td><td>
		The comments element
</td></tr>
<tr class="b"><td><a href="#link">link</a></td><td>
		The link element
</td></tr>
<tr class="b"><td><a href="#defaultrecord">defaultrecord</a></td><td>
		The default record
</td></tr>
<tr class="a"><td><a href="#value">value</a></td><td>
A number or string, can be nested. If the value element is specfied in an input element, multiple values
maybe present to indicate an enumeration of allowed values. The last value specified will be the default.
This behavior may change, i.e. an addtional default attribute could be added to explicity identify the default
value.
</td></tr>
<tr class="b"><td><a href="#returns">returns</a></td><td>
		Description of what the Method/Task returns, similar to a param element.
</td></tr>
<tr class="a"><td><a href="#example">example</a></td><td>
		An example element is used to demonstrate how a tool, task or method is used by the user.
		We will likely make additional tags or attributes to allow inclusions of working files. 
</td></tr>
</table>    
</div>
<div class="h3">
	<h3>
		XMLCASA Element Tag Attributes
	</h3>
<br>
<h3><a name="tool">tool</a></h3>
<P>A tool typically has the following elements, short description, description, one or more methods and an example.
<table border="1" cellspacing="2" cellpadding="3" width="100%">
<colgroup>
	<col width="10%"></col>
	<col width="10%"></col>
	<col width="80%"></col>
</colgroup>
	<tr class="b"><th>Attribute</th><th>Required?</th><th>Description</th></tr>
	<tr class="a"><td>name</td><td> yes</td><td>This is the name of the tool.</td></tr>
	<tr class="b"><td>module </td><td> no</td><td>This is the module to which the tool belongs</td></tr>
</table>
<XMP>
<tool name="logsink" module="logsink">
<shortdescription>tool for logsink</shortdescription>
<description></description>
....
</tool>
</XMP>
<hr>

</pre>
<h3><a name="task">task</a></h3>
<P>		A task is very similar to a tool method. The main difference being it will be a complex 
		set of calls to one or more tool methods. As such it may contain output, inout, and input
		elements.
		It should always have a shortdescription, description, and returns elements.
<table border="1" cellspacing="2" cellpadding="3" width="100%">
<colgroup>
	<col width="10%"></col>
	<col width="10%"></col>
	<col width="80%"></col>
</colgroup>
	<tr class="b"><th>Attribute</th><th>Required?</th><th>Description</th></tr>
	<tr class="a"><td>name</td><td> yes</td><td>This is the name of the task.</td></tr>
		<tr class="b"><td>module </td><td> no</td> <td>This is the module to which the task belongs</td></tr>
</table>
<XMP>
<task name="imagertask" module="imagertask">
<shortdescription>tool for imager tasks</shortdescription>
<description>imagertask is a tool that accomplishes common tasks in synthesis processing.</description>
....
</task>
</XMP>
<hr>
<h3><a name="code">code </a></h3>
<P>		Helper code for the C++ code generaterator.  It will contain the private and or include
		elements.
		Currently no attributes.
<hr>
<XMP>
<code>
   <include>xmlcasa/synthesis/imager_forward.h</include>
<private>
   #include &lt;xmlcasa/synthesis/imager_private.h&gt;
</private>
</code>
</XMP>
<hr>
<h3><a name="include">include </a></h3>
<P>		Additional include statements, handy for forward declarations. During development this should
		just be a single file to avoid having to rerun the code generator each time a change is made.
		Currently no attributes.
<hr>
<XMP>
<code>
   <include>xmlcasa/synthesis/imager_forward.h</include>
<private>
   #include &lt;xmlcasa/synthesis/imager_private.h&gt;
</private>
</code>
</XMP>
<hr>
<h3><a name="private">private </a></h3>
<P>		What to additionally include in the private part of a class. Also during development this
		should just be a single include file to avoid having to rerun the code generator when making
		changes.
		Currently no attributes.
<hr>
<XMP>
<code>
   <include>xmlcasa/synthesis/imager_forward.h</include>
<private>
   #include &lt;xmlcasa/synthesis/imager_private.h&gt;
</private>
</code>
</XMP>
<hr>
<h3><a name="shortdescription">shortdescription </a></h3>
<P>		A short terse description, typically one or two lines. This will typically appear in the
		scripting languages help text.
		Currently no attributes.
		<hr>
<h3><a name="description">description </a></h3>
<P>		A more detail description of what the tool, task, method, parameter is. The use of latex 
		in this block is supported for generating html and pdf documentation.
		Currently no attributes.
		<hr>
<h3><a name="defaultrecord">defaultrecord </a></h3>
<P>		The default record
		Currently no attributes.
		<hr>
<h3><a name="method">method</a></h3>
<P>		A method or function of an object belonging to a tool.  A method will typically contain a
		shortdescription, description, returns, and example elements.  It may also have output, inout,
		and input elements.
<table border="1" cellspacing="2" cellpadding="3" width="100%">
<colgroup>
	<col width="10%"></col>
	<col width="10%"></col>
	<col width="80%"></col>
</colgroup>
	<tr class="b"><th>Attribute</th><th>Required?</th><th>Description</th></tr>
<tr class="a"><td>type </td><td> yes </td><td> Allowed options are function or constructor. Currently constructors are ignored</td></tr>
<tr class="b"><td>name </td><td> yes</td> <td>This is the name of the method.</td></tr>
</table>
<hr>
<xmp>
<method type="function" name="advise">
<shortdescription>Advise (and optionally use) parameter values</shortdescription>
...
</method>
</xmp>
<hr>
<h3><a name="output">output </a></h3>
<P>		An output element consists of one or more param elements that will be returned by the method
		or task.
		Currently no attributes.
<hr>
<xmp>
<output> 
<param xsi:type="int" name="pixels">
<description>Number of pixels on a side</description>
</param>
<param xsi:type="double" name="cell" units="arcsec">
<description>Recommended maximum cellsize</description> 
</param>
<param xsi:type="int" name="facets">
<description>Recommended number of facets on one axis</description>
</param>
<param xsi:type="MDirection" name="phasecenter">
<description>Direction of phase center as a measure</description>
</param>
</output>
</xmp>
<hr>
<h3><a name="inout">inout </a></h3>
<P>An inout element consists of one or more param elements that will be used as input for a 
		method or tasked and possibly modified and returned as output.
		Currently no attributes.
		<hr>
<h3><a name="input">input </a></h3>
<P>		An input element consists of one or more param elements that will be used as input by a
		method or task. Other tools maybe used as input if properly registered with the system.
		Currently no attributes.
<hr>
<h3><a name="param">param</a></h3>
<P>		A param element describes an argument to a task or tool method. Typically it will have
		a description element and if it has a default value on or more value elements.
<table border="1" cellspacing="2" cellpadding="3" width="100%">
<colgroup>
	<col width="10%"></col>
	<col width="10%"></col>
	<col width="80%"></col>
</colgroup>
	<tr class="b"><th>Attribute</th><th>Required?</th><th>Description</th></tr>
	<tr class="a"><td>name </td><td> yes</td><td>This is the name of the param.</td></tr>
<tr class="b"><td>xsi:type </td><td> yes</td><td> Choose from the following types: any, int, bool, string, double, intArray, boolArray, stringArray, doubleArray, casa*(tool)</td></tr>
<tr class="a"><td>units </td><td> no</td> <td>By specifying a unit attribute, the param because a quantity.</td></tr>
</table>
<hr>
<xmp>
<input>
<param xsi:type="bool"  name="takeadvice">
<description>Use the advised values?</description>
<value>true</value>
</param>

<param xsi:type="double" name="amplitudeloss">
<description>Maximum fractional amplitude loss due to faceting</description>
<value>0.05</value>
</param>

<param xsi:type="any" name="fieldofview">
<description>Desired field of view</description> 
<any type="variant" />
<value>1.0deg</value>
</param>
</input>
</xmp>
<hr>
<h3><a name="returns">returns</a></h3>
<P>Description of what the Method/Task returns, similar to a param element.
<table border="1" cellspacing="2" cellpadding="3" width="100%">
<colgroup>
	<col width="10%"></col>
	<col width="10%"></col>
	<col width="80%"></col>
</colgroup>
	<tr class="b"><th>Attribute</th><th>Required?</th><th>Description</th></tr>
	<tr class="a"> <td>type </td><td> yes</td> <td>You may specify a return type as one of the types specified in the param xsi:type attribute, additionally you may specify a tool as a return type.</td></tr>
</table>
<hr>
<xmp>
<returns xsi:type="bool"/>
</xmp>
<hr>
<h3><a name="example">example</a></h3>
<P>		An example element is used to demonstrate how a tool, task or method is used by the user.
		We will likely make additional tags or attributes to allow inclusions of working files. 
		Currently no attributes.
<hr>
<xmp>
<example>
\begin{verbatim}
im.ft(model='3C273XC1.model', complist='3C273XC1.complist');
im.makeimage(type='residual', image='3C273XC1.residual')
im.makeimage(type='psf', image='3C273XC1.psf')
\end{verbatim}
</example>
</xmp>
<hr>
<h3><a name="any">any </a></h3>
<P>		An any type, for unknown or records, i.e. string or int.
<table border="1" cellspacing="2" cellpadding="3" width="100%">
<colgroup>
	<col width="10%"></col>
	<col width="10%"></col>
	<col width="80%"></col>
</colgroup>
	<tr class="a"><th>Attribute</th><th>Required?</th><th>Description</th></tr>
	<tr class="b"><td>type </td><td> yes</td><td> Currently an any element may be specified as either a record or variant</td> </tr>
</table>
<hr>
<xmp>
<param xsi:type="any" name="threshold">
<description>threshold for mask</description>
<any type="variant" />
<value>0.0Jy</value>
</param>

<param xsi:type="any"  name="height">
<any type="record"/>
<defaultrecord>
<value name="amp" xsi:type="double">1.0</value>
</defaultrecord>
<description>amplitude of Gaussian, or 3 numeric values</description>
</param>
</xmp>
</hr>
<h3><a name="link">link</a></h3>
<P>The link element. A way to specify the a link to an external document.
value.
<table border="1" cellspacing="2" cellpadding="3" width="100%">
<colgroup>
	<col width="10%"></col>
	<col width="10%"></col>
	<col width="80%"></col>
</colgroup>
	<tr class="a"><th>Attribute</th><th>Required?</th><th>Description</th></tr>
	<tr class="b"><td>anchor</td><td>yes</td> <td>HTML locator
</td></tr>
</table>
<hr>
<h3><a name="comments">comments</a></h3>
<P>The comments element. No attributes currently.
<hr>
<hr>
<h3><a name="value">value</a></h3>
<P>A number or string, can be nested. If the value element is specfied in an input element, multiple values
maybe present to indicate an enumeration of allowed values. The last value specified will be the default.
This behavior may change, i.e. an addtional default attribute could be added to explicity identify the default
value.
<table border="1" cellspacing="2" cellpadding="3" width="100%">
<colgroup>
	<col width="10%"></col>
	<col width="10%"></col>
	<col width="80%"></col>
</colgroup>
	<tr class="a"><th>Attribute</th><th>Required?</th><th>Description</th></tr>
	<tr class="b"><td>name</td><td>no</td> <td>A value my have an optional name, the name is required
			if part of a record element.</td></tr>
<tr class="a"><td>type </td><td> no</td><td> The type may be specified as either vector, scalar, array,
	       	or struct(for complex)</td></tr>
<tr class="b"><td>xsi:type </td><td> no</td><td>Maybe any of the types in specified in the param xsi:type attribute</td></tr>
<tr class="a"><td>shape </td><td> no</td> <td>Currently not implemented</td></tr>
</table>
<hr>
<xmp>
Example setting a "Quantity"

<param xsi:type="double" name="mstart" units="m/s">
<description>Start velocity (e.g. '20Km/s')</description>
<value>0.0</value>
</param>

Example setting an array with one value.

<param xsi:type="intArray" name="start">
<description>Start channels (0-relative)</description>
<value>0</value>
</param>

Example of an empty array

<param xsi:type="intArray" name="spwid">
<description>Spectral Window Ids (0 relative) to select</description>
<value type="vector"></value>
</param>

Example setting a vector with more than one value

<param xsi:type="intArray" name="quack">
<description>Flag VLA quacks -- scan interval and quack length, in seconds</description>
<value type="vector">
<value>0</value>
<value>0</value> </value>
</param>

Example setting a complex array

<param xsi:type="complexArray" name="flux">
<description>The flux value.
A vector with four real or complex numbers</description>
<value type="vector">
<value type="struct"><value name="re">1.0</value><value name="im">0.0</value></value>
<value type="struct"><value name="re">0.0</value><value name="im">0.0</value></value>
<value type="struct"><value name="re">0.0</value><value name="im">0.0</value></value>
<value type="struct"><value name="re">0.0</value><value name="im">0.0</value></value>
</value>            
</param>

Example of a multiple choice, note default is last option.

<param xsi:type="string" name="polarization">
<description>The polarization of the value field.
``Stokes'', ``linear'' or ``circular''</description>
<value>Circular</value>
<value>Linear</value>
<value>Stokes</value>
</param>
</xmp>
<hr>
</div>
</div>
</div>
<hr>
<i>
	Please send any comments or questions about <font
		face=helvetica>CASA or AIPS++</font>
	to <a href="mailto:aips2-requests@nrao.edu">aips2-requests@nrao.edu</a><p>
	Copyright &#169; 2007 Associated Universities Inc.,
	Washington, D.C.</i>
<p>
<i>
	<a href="http://www.gnu.org/copyleft/gpl.html">This code is available under the terms of the GNU General Public Lincense</a>
	<!-- Start of nrao-trailer.html -->
	<br><br>
	<hr align=left width="100%">
	<a class=navig href="http://www.nrao.edu/">Home</a> | 
	<a class=navig href="http://www.nrao.edu/cgi-bin/contact">Contact Us</a> | 
	<a class=navig href="http://www.nrao.edu/navbar/directories.shtml">Directories</a> | 
	<a class=navig href="http://www.nrao.edu/navbar/sitemap.shtml">Site Map</a> | 
	<a class=navig href="http://www.nrao.edu/navbar/help.shtml">Help</a> | 
	<a class=navig href="http://www.nrao.edu/policy/privacy.shtml">Privacy Policy</a> |
	<a class=navig href="http://search.nrao.edu/">Search</a> 
	<br><br>
	<!-- End of nrao-trailer.html -->
	<em>Modified on 
		Saturday, 05-Jan-2007 13:17:19 MST
	</em>
	<!-- Start of nrao-end.html -->
</td>
</tr>
</table>

</body>
</html>
